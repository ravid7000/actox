{"version":3,"sources":["webpack://actox/webpack/universalModuleDefinition","webpack://actox/webpack/bootstrap","webpack://actox/./src/utils.js","webpack://actox/./src/actox.js","webpack://actox/./bundle.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_isObject","_isFunction","toString","tag","_errorLogger","err","console","error","_isValidState","state","Error","e","StateManager","instance","set","_logger","type","what","storeObj","logger","group","log","groupEnd","_updateState","data","isDispatching","st","newState","assign","listeners","length","_updateListeners","_dispatchAction","actionListener","concat","_len","arguments","rest","Array","_key","apply","undefined","fn","_getState","_addState","storeState","_subscribe","cb","stateObj","push","createStore","getState","updateState","dispatch","subscribe","addState","__webpack_exports__"],"mappings":"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","file":"actox.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"actox\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"actox\"] = factory();\n\telse\n\t\troot[\"actox\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function _isObject(value) {\n    const type = typeof value\n    return value !== null && type === 'object'\n}\n\nexport function _isFunction(value) {\n    const toString = Object.prototype.toString\n    if (!value) {\n        return false\n    }\n    const tag = toString.call(value)\n    return (\n        tag === '[object Function]' ||\n        tag === '[object AsyncFunction]' ||\n        tag === '[object GeneratorFunction]' ||\n        tag === '[object Proxy]'\n    )\n}\n\nexport function _errorLogger(err) {\n    console.error('[ACTOX Store]', err)\n}\n\nexport function _isValidState(state) {\n    try {\n        if (!state || !_isObject(state)) {\n            throw new Error('Invalid state object. State should be an object of objects.')\n        }\n        return true\n    } catch (e) {\n        _errorLogger(e)\n        return false\n    }\n}\n\nexport function _isValidActionListener(actionListener) {\n    if (_isFunction(actionListener) || _isObject(actionListener)) {\n        return true\n    }\n    return false\n}\n\nfunction strToPath(string) {\n    const charCodeOfDot = '.'.charCodeAt(0)\n    const reEscapeChar = /\\\\(\\\\)?/g\n    const rePropName = RegExp(\n        // Match anything that isn't a dot or bracket.\n        '[^.[\\\\]]+' +\n            '|' +\n            // Or match property names within brackets.\n            '\\\\[(?:' +\n            // Match a non-string expression.\n            '([^\"\\'].*)' +\n            '|' +\n            // Or match strings (supports escaping characters).\n            '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' +\n            ')\\\\]' +\n            '|' +\n            // Or match \"\" as the space between consecutive dots or empty brackets.\n            '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))',\n        'g'\n    )\n\n    const result = []\n    if (string.charCodeAt(0) === charCodeOfDot) {\n        result.push('')\n    }\n    string.replace(rePropName, (match, expression, quote, subString) => {\n        let key = match\n        if (quote) {\n            key = subString.replace(reEscapeChar, '$1')\n        } else if (expression) {\n            key = expression.trim()\n        }\n        result.push(key)\n    })\n    return result\n}\n\nexport function _accessModify(state) {\n    if (!state) return state\n    state._getValue = function(str, def) {\n        if (!str) return undefined\n        let index = 0\n        const path = strToPath(str)\n        const length = path.length\n        while (state !== null && index < length) {\n            state = state[path[index++]]\n        }\n        const obj = index && index === length ? state : undefined\n        return obj ? obj : def\n    }\n    return state\n}\n","import {\n    _errorLogger,\n    _isFunction,\n    _isObject,\n    _isValidActionListener,\n    _isValidState,\n} from './utils'\n\nconst StateManager = (function() {\n    let instance = null\n    return {\n        get: () => {\n            return instance\n        },\n        set: state => {\n            instance = state\n        },\n    }\n})()\n\nfunction _logger(type, what) {\n    const storeObj = StateManager.get()\n    if (!storeObj) {\n        return false\n    }\n    if (!storeObj.logger) {\n        return false\n    }\n    if (!storeObj.state) {\n        return false\n    }\n    console.group('[ACTOX Store]')\n    console.log(type, what)\n    console.log('State', storeObj.state)\n    console.groupEnd()\n}\n\nfunction _updateState(type, data) {\n    const storeObj = StateManager.get()\n    try {\n        if (!type) {\n            throw new Error('To update a state, type must be provided.')\n        }\n\n        if (!storeObj) {\n            throw new Error('Initialize store first with createStore()')\n        }\n        if (!storeObj.state) {\n            return\n        }\n        if (storeObj.isDispatching) {\n            throw new Error('You may not call updateState() while executing updateState().')\n        }\n        storeObj.isDispatching = true\n        StateManager.set(storeObj)\n        const { state } = storeObj\n        if (_isObject(data)) {\n            const st = state[type]\n            if (st) {\n                const newState = Object.assign({}, st, data)\n                state[type] = newState\n                storeObj.state = state\n                StateManager.set(Object.assign({}, storeObj))\n                _logger('Update: ' + type, data)\n            }\n        }\n    } catch (e) {\n        _errorLogger(e)\n    } finally {\n        storeObj.isDispatching = false\n        StateManager.set(storeObj)\n        _updateListeners()\n    }\n}\n\nfunction _dispatchAction(type, ...rest) {\n    const storeObj = StateManager.get()\n\n    try {\n        if (!type) {\n            throw new Error('To dispatch an action, type must be provided.')\n        }\n        if (!storeObj) {\n            throw new Error('Initialize store first with createStore()')\n        }\n        if (storeObj.state) {\n            if (!_isValidActionListener(storeObj.actionListener)) {\n                throw new Error('Invalid type of action listener is provided')\n            }\n            _logger('Dispatch:', `\"${type}\"`)\n            if (_isFunction(storeObj.actionListener)) {\n                storeObj.actionListener.apply(undefined, [type, _updateState].concat(rest))\n            } else if (_isObject(storeObj.actionListener)) {\n                const fn = storeObj.actionListener[type]\n                if (_isFunction(fn)) {\n                    fn.apply(undefined, [_updateState].concat(rest))\n                }\n            }\n        }\n    } catch (e) {\n        _errorLogger(e)\n    }\n}\n\nfunction _getState() {\n    try {\n        if (!StateManager.get()) {\n            return null\n        }\n        if (StateManager.get().isDispatching) {\n            throw new Error('You may not call getState() while executing updateState().')\n        }\n        return StateManager.get().state\n    } catch (e) {\n        _errorLogger(e)\n    }\n}\n\nfunction _addState(newState) {\n    try {\n        if (!StateManager.get()) {\n            return null\n        }\n        if (StateManager.get().isDispatching) {\n            throw new Error('You may not call addState() while executing updateState().')\n        }\n        if (_isValidState(newState)) {\n            const storeState = Object.assign({}, StateManager.get().state, newState)\n            const storeObj = StateManager.get()\n            storeObj.state = storeState\n            StateManager.set(storeObj)\n            _logger('State: new state added', newState)\n        }\n    } catch (e) {\n        _errorLogger(e)\n    }\n}\n\nfunction _subscribe(cb) {\n    try {\n        if (!_isFunction(cb)) {\n            throw new Error('Expected the listener to be a function.')\n        }\n        if (!StateManager.get()) {\n            return null\n        }\n\n        const stateObj = StateManager.get()\n        stateObj.listeners.push(cb)\n        StateManager.set(stateObj)\n    } catch (e) {\n        _errorLogger(e)\n    }\n}\n\nfunction _updateListeners() {\n    if (!StateManager.get()) {\n        return null\n    }\n    const listeners = StateManager.get().listeners\n    for (let i = 0; i < listeners.length; i++) {\n        listeners[i]()\n    }\n}\n\nexport default function createStore(state, actionListener, logger) {\n    _isValidState(state)\n    const storeObj = {\n        state,\n        logger,\n        actionListener,\n        isDispatching: false,\n        listeners: [],\n    }\n    StateManager.set(storeObj)\n    _logger('Init:', 'store')\n\n    return {\n        getState: _getState,\n        updateState: _updateState,\n        dispatch: _dispatchAction,\n        subscribe: _subscribe,\n        addState: _addState,\n    }\n}\n\nexport const updateState = _updateState\nexport const dispatch = _dispatchAction\nexport const getState = _getState\nexport const subscribe = _subscribe\nexport const addState = _addState\n","import createStore from './src/actox';\nimport { getState, subscribe, dispatch, addState, updateState } from './src/actox';\nexport { createStore, getState, subscribe, dispatch, addState, updateState };"],"sourceRoot":""}